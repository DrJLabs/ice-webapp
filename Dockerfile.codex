# ICE-WEBAPP Codex Environment Replica
# Version: 2.0
# Base Image: Microsoft Dev Container (Ubuntu) - Provides a rich, pre-configured environment.
FROM mcr.microsoft.com/devcontainers/base:ubuntu

# --- Environment Configuration ---
# Set non-interactive mode for package installations to avoid prompts.
ENV DEBIAN_FRONTEND=noninteractive

# --- Tooling Installation ---
# Install pnpm globally using the pre-installed npm. This is the recommended and most reliable method.
RUN npm install -g pnpm@latest

# --- Workspace Setup ---
# Create and set the working directory for the project.
WORKDIR /workspace/ice-webapp

# Copy the custom entrypoint script into the container and make it executable.
COPY entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh

# --- Container Execution ---
# Set the custom entrypoint script to run when the container starts.
ENTRYPOINT ["entrypoint.sh"]

# Default command to run is a bash shell, allowing for interactive use.
CMD ["bash"] 