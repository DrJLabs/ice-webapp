# ICE-WEBAPP Codex Environment Replica
# Version: 2.0
# Base Image: Microsoft Dev Container (Ubuntu) - Provides a rich, pre-configured environment.
FROM mcr.microsoft.com/devcontainers/base:ubuntu

# Set environment variables
ENV PNPM_HOME="/root/.local/share/pnpm"
ENV PATH="$PNPM_HOME:$PATH"

# Install Node.js and npm
RUN apt-get update && apt-get install -y nodejs npm

# Install pnpm globally
RUN npm install -g pnpm@latest

# --- Environment Configuration ---
# Set non-interactive mode for package installations to avoid prompts.
ENV DEBIAN_FRONTEND=noninteractive

# --- Workspace Setup ---
# Create and set the working directory for the project.
WORKDIR /workspace/ice-webapp

# Copy the custom entrypoint script into the container and make it executable.
COPY entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh

# --- Container Execution ---
# Set the custom entrypoint script to run when the container starts.
ENTRYPOINT ["entrypoint.sh"]

# Default command to run is a bash shell, allowing for interactive use.
CMD ["bash"] 